
[ENG-1429] Add "path presets" to session launcher to allow recently launched paths
Status: Spec Needed

Description:
* We have a list of previous working directories from previous sessions. Could grab/use directly from here.

Comments:
[2025-06-30 11:48:59] allison@humanlayer.dev:
## Research Update: Path Presets Implementation Options

Completed initial research on implementing path presets for the session launcher. Full research document available at: `thoughts/shared/research/2025-06-30_11-24-53_path_presets_implementation.md`

### Current State
- All interfaces (CLI, TUI, WUI) support working directory specification
- Session history is stored in SQLite with `working_dir` field
- No existing mechanism for quick access to recent/favorite paths

### Implementation Options Identified

**Option 1: Simple Recent Paths** (Minimal)
- Query distinct paths from session history
- Display as numbered list (1-9) in TUI, suggestions in WUI
- Pros: Minimal changes, leverages existing data
- Cons: No favorites, limited customization

**Option 2: Managed Presets** (Recommended)
- New `path_presets` table with favorites and usage tracking
- Full CRUD operations for preset management
- UI: Preset selector in TUI ('p' key), enhanced fuzzy search in WUI
- CLI: `humanlayer presets` commands
- Pros: Best UX, persistent favorites, aligns with "Session Templates" vision
- Cons: More complex implementation

**Option 3: Hybrid Approach**
- Recent paths + simple favorite marking in config
- Balance between features and complexity

### Key Integration Points
- `hlyr/src/commands/launch.ts:54` - CLI working directory handling
- `hld/store/sqlite.go:81` - Session storage
- `humanlayer-tui/sessions.go:59-62` - TUI input field
- `humanlayer-wui/src/components/CommandInput.tsx:37-47` - WUI suggestions

### Next Steps
Need to decide on implementation approach and create detailed specification. Option 2 (Managed Presets) provides the best user experience and future extensibility.

Open questions:
- User-specific vs shared presets?
- Auto-detect git repos as suggested presets?
- Default number of recent paths to track?
- Include other session config in presets (model, prompts)?

[2025-07-01 10:50:51] Sundeep Malladi:
Seconding Option 2 here, I was starting to think about favorites (as well as number of other path/project-specific things that may start to become valuable over time). I don't think we should call these `path_presets` given that, maybe just `projects`? 

[2025-07-01 12:08:19] Dexter Horthy:
i think its worth exploring Container Use before we invest way more in path/process  management

[2025-07-02 15:55:44] allison@humanlayer.dev:
What was the status of this? Did we decide on a potential direction? 

I looked at container use and I don't think it really fits the bill here. That kinda falls into the same space as "worktree/environment creation" which I think is different than just path handling being better/easier to use? I think it's even different than "orchestration" (how agents combine together to get tasks done). I think the first stage of wui is "Great at agent management" then potential next features are "orchestration" related and then finally we'd move into "environment setup". 

I also don't like that container use is a MCP server. Doesn't seem to fit in with what we actually want even when we do get to environment setup (to create the environment outside of the scope of the agent and orchestrate agents in that environment, not have the agent manage the environment itself). 

I could see both options 1 and option 2 being potentials here for this ticket. I'm still leaning towards option 1 though originally. There are higher priority things than this imo. Potential to wait for this whole ticket until after a conversation focused on ideation stage? Or just agree on a smaller scope and have this conversation later?

[2025-07-03 19:40:06] Dexter Horthy:
yeah didn't realize container use was MCP. I could see a world where we delegated the "create a worktree" and "manage the claude code process" to a tool like CU but if its all hidden behind an MCP then that's annoying and I don't want it. Maybe we can borrow some things from the CU architecture someday…mounting a worktree into a container for sandboxing feels kinda valuable … but yeah, can be a later thing. Lets do paths stuff and assume ppl will manage their own worktrees for now

[2025-07-03 19:42:25] Dexter Horthy:
for option 1 vs. 2 - how about option 1 with some kind of substring or eventually even fuzzy search? So if you've never typed it, you gotta type it, if you've already typed it, you can pick from the list, or start typing to filter.

if you want to put on your product hat, go use some tools that do this well! Maybe even come back with screenshots!

I like how chrome handles, feels intuitive 

![Screenshot 2025-07-02 at 7.42.19 PM.png](https://uploads.linear.app/3ee2840f-7196-42ab-91f2-73ab50c48671/36c6fb51-9d24-4711-8930-e864a3b326c5/89577868-b2c7-468e-99e9-bb590b878797)

![Screenshot 2025-07-02 at 7.42.07 PM.png](https://uploads.linear.app/3ee2840f-7196-42ab-91f2-73ab50c48671/3db244e9-6f29-4162-aabb-12c2b8796f26/75414a47-4a98-4bda-bff2-adae11c2baff)

[2025-07-03 19:43:02] Dexter Horthy:
@allison you wanna pick this up and write an implementation plan based on your research?

[2025-07-03 08:36:29] allison@humanlayer.dev:
Yeah for sure. And yeah I'll riff off of your feedback above to create it


View in Linear: https://linear.app/humanlayer/issue/ENG-1429/add-path-presets-to-session-launcher-to-allow-recently-launched-paths
