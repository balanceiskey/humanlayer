
[ENG-1449] Fix resumed sessions to inherit all configuration from parent
Status: Ready for Deploy
Assignee: allison@humanlayer.dev

Description:
Currently, resumed sessions only inherit `Model` and `WorkingDir` from their parent sessions, causing all other configuration (permissions, allowed/disallowed tools, MCP servers, system prompts, etc.) to be lost unless explicitly re-specified.

This creates a poor user experience where:

* Users must remember and re-specify all configuration when resuming
* Resumed sessions may behave differently than their parents
* Security boundaries could be accidentally relaxed if permissions aren't re-specified

## Solution

Store all session configuration in the database and automatically inherit it when resuming sessions, with support for explicit overrides.

## Key Changes Required

* Add missing columns to sessions table (permission_prompt_tool, append_system_prompt, allowed_tools, disallowed_tools)
* Update `ContinueSession` in hld/session/manager.go:700 to inherit all fields from parent
* Inherit MCP server configuration from parent sessions
* Only allow explicit overrides when provided in the request

## Implementation Plan

See detailed plan at: `thoughts/allison/plans/resume_inheritance_improvements.md`
[https://github.com/humanlayer/thoughts/blob/main/repos/humanlayer/allison/plans/resume_inheritance_improvements.md](https://github.com/humanlayer/thoughts/blob/main/repos/humanlayer/allison/plans/resume_inheritance_improvements.md)

Comments:
[2025-06-27] Dexter Horthy:
CI issues but then working on merging

[2025-06-25] Dexter Horthy:
@allison LGTM! moving to ready for dev

[2025-06-25] Dexter Horthy:
@allison checking this out now


View in Linear: https://linear.app/humanlayer/issue/ENG-1449/fix-resumed-sessions-to-inherit-all-configuration-from-parent
