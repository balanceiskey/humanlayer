
[ENG-1479] Display Claude sub-task events hierarchically in WUI conversation view
Status: Spec Needed
Assignee: Sundeep Malladi

Description:
The WUI currently displays all Claude events in a flat chronological list, making conversations with sub-tasks confusing. Need to implement hierarchical display that groups sub-task events under their parent Task calls.

## Problem

* All events displayed flat (`humanlayer-wui/src/components/internal/SessionDetail.tsx:633-648`)
* No visual distinction between main task and sub-task events
* Sub-task events interleaved chronologically, breaking conversation flow
* No way to collapse/expand task groups

## Solution

Implement visual hierarchy for sub-task events:

* Indent sub-task events based on `parent_tool_use_id`
* Group events under parent Task calls with collapsible sections
* Add visual indicators (background color, borders) for task levels
* Show Task description as section header

## Additional Features

* Toggle to show/hide sub-task events
* Breadcrumb navigation for deep nesting
* Progress indicators for active tasks

## Dependencies

* Requires daemon changes from [ENG-1478](https://linear.app/humanlayer/issue/ENG-1478/track-and-store-parent-child-relationships-for-claude-sub-task-events) to expose parent relationships
* Need API to return events with parent metadata

## References

* Source: `thoughts/shared/research/2025-06-30_15-00-22_claude_subtask_event_streaming.md`
* GitHub: [https://github.com/humanlayer/thoughts/blob/main/repos/humanlayer/shared/research/2025-06-30_15-00-22_claude_subtask_event_streaming.md](https://github.com/humanlayer/thoughts/blob/main/repos/humanlayer/shared/research/2025-06-30_15-00-22_claude_subtask_event_streaming.md)
* Key code: `humanlayer-wui/src/components/internal/SessionDetail.tsx:633-648`

Comments:
[2025-07-02] Dexter Horthy:
for spec writing, just assume we're bringing back parent_tool_call_id for FE to do the mapping


View in Linear: https://linear.app/humanlayer/issue/ENG-1479/display-claude-sub-task-events-hierarchically-in-wui-conversation-view
